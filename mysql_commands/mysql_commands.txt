MYSQL commands

After the installation is done
- mysql -u "username" -p  (to log in as that user, and prompt for the password or)
- mysql -uadmin -p`cat /etc/psa/.psa.shadow`  (to log in to plesk protected db)
- plesk db  (for not protected mysql instance on plesk panel server)

In mysql end every command with ";". Also in most documentation, the commands are written all capital, however this is not a must.

Databases and tables
- show databases;  (to show existing databases)
- use "dbname";  (to switch to that database)
- select database();  (to know which one is active)
- create database "dbname";  (to create the dbname database)
- show tables;  (to see tables in the active db)
- describe "tablename"  (to see the table data structure, doesnt show records!)
- select * from "tablename"  (to see all records in all fields)

- create table "pet" (name varchar(20)m, owner varchar(20), sex char(1), birth date);  (to create the table "pet" with that structure, birt only accepts date format) 
- load data local infile '/path/to/file' into table "tablename";  (the file's records needs to be separated with tab, and need to follow the structure of the table)
(\N for entering null into a field, this only works, when loaded from a file)
- insert into "pet" values ('stuffy', ... NULL);  (to insert data manually, use null for missing info)

Users
- select user, host from mysql.user;  (to show all existing users and their host information)
- show grants for 'username'@'host'  (to see "username"'s rights)

- create user 'Feri'@'localhost' identified by 'password for Feri'  (to create a user and specify its password)
- grant all privileges on *.*  (to grant admin privileges to it)
- drop user 'Feri'@'localhost';  (to erase that user)

MySQL dump
- mysqldump -uadmin -p --all-databases >> dump.sql
- mysqldump -uadmin -p --all-databases --events --triggers --routines > all_db.sql  (dump everything, recommended way)
Database dump for plesk
- mysqldump -uadmin -p`cat /etc/psa/.psa.shadow` psa > psa_bak.sql

MySQL import
- mysql -u username -p database_name < file.sql

Watching mysql processes
- watch -n0.5 'mysql -uadmin -p`cat /etc/psa/.psa.shadow` -e "show full processlist;"' (plesk edition)
- watch -n0.5 'mysql -e "show full processlist;"' (generic)

mysqltuner
- wget -O mysqltuner.pl mysqltuner.pl
- perl mysqltuner.pl

Determining db engines:
innodb/myisam
mysql -e "SELECT TABLE_SCHEMA as DbName ,TABLE_NAME as TableName ,ENGINE as Engine FROM information_schema.TABLES WHERE ENGINE='MyISAM' AND TABLE_SCHEMA NOT IN('mysql','information_schema','performance_schema');"

etc
mysqlcheck --repair --all-databases

Saving the root password in a file for easier access:
- for the desired user (very likely to be root) create the file ~/.my.cnf
- chmod 400 ~/.my.cnf
	[client]
	user=root
	password="pass"
 
